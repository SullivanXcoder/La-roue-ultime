<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>La Roue Ultime ++</title>
  <link rel="stylesheet" href="style.css">
  <meta name="theme-color" content="#111111">
</head>
<body>
  <header class="topbar">
    <div class="brand">🎯 La Roue Ultime <span class="plus">++</span></div>
    <div class="spacer"></div>
    <button id="themeToggle" class="btn ghost" aria-label="Changer de thème">🌗</button>
  </header>

  <main class="container">
    <section class="panel wheel-panel">
      <div class="wheel-wrap">
        <div id="pointer">▼</div>
        <svg id="wheel" class="wheel" viewBox="-50 -50 100 100" aria-label="Roue de tirage"></svg>
      </div>

      <div class="controls">
        <button id="spinBtn" class="btn primary big">SPIN</button>

        <div class="setting">
          <label for="spinDuration">⏱️ Durée du spin : <span id="spinDurationLabel">4.0s</span></label>
          <input id="spinDuration" type="range" min="1000" max="12000" step="250" value="4000">
        </div>

        <div class="grid two">
          <div class="setting">
            <label>🎲 Multi‑tirage</label>
            <select id="multiDraw">
              <option value="1">1 choix</option>
              <option value="2">2 choix</option>
              <option value="3">3 choix</option>
            </select>
          </div>
          <div class="setting">
            <label class="row">
              <input type="checkbox" id="modeElimination">
              <span>🧹 Mode élimination</span>
            </label>
          </div>
        </div>

        <div class="grid two">
          <div class="setting">
            <label class="row">
              <input type="checkbox" id="ttsToggle" checked>
              <span>🗣️ Annoncer le résultat</span>
            </label>
          </div>
          <div class="setting">
            <label class="row">
              <input type="checkbox" id="soundToggle">
              <span>🔔 Effet “click”</span>
            </label>
          </div>
        </div>

        <div class="result">
          <div class="result-title">Résultat</div>
          <div id="resultText" class="result-text">—</div>
        </div>
      </div>
    </section>

    <section class="panel list-panel">
      <h2>🧩 Choix de la roue</h2>
      <div class="add-row">
        <input id="newChoice" class="input" placeholder="Ajouter un choix et Enter…">
        <button id="addChoice" class="btn">Ajouter</button>
      </div>

      <ul id="choicesList" class="choices"></ul>

      <div class="row gap mt">
        <button id="resetElimination" class="btn ghost">Réactiver tous les choix</button>
        <button id="shuffleChoices" class="btn ghost">Mélanger</button>
        <button id="clearChoices" class="btn danger">Tout effacer</button>
      </div>

      <div class="row gap mt">
        <button id="exportBtn" class="btn">Exporter JSON</button>
        <label class="btn">
          Importer JSON
          <input id="importFile" type="file" accept="application/json" hidden>
        </label>
      </div>
    </section>

    <section class="panel stats-panel">
      <h2>📈 Statistiques</h2>
      <div class="grid two">
        <div class="stat">
          <div class="stat-label">Spins totaux</div>
          <div id="totalSpins" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Choix actifs</div>
          <div id="activeCount" class="stat-value">0</div>
        </div>
      </div>

      <canvas id="pie" width="420" height="240" class="mt"></canvas>

      <table class="table mt" aria-label="Fréquence par choix">
        <thead><tr><th>Choix</th><th>Fréquence</th></tr></thead>
        <tbody id="statsBody"></tbody>
      </table>

      <h3 class="mt">🕘 10 derniers tirages</h3>
      <ol id="history" class="history"></ol>
    </section>
  </main>

  <footer class="foot">
    <small>Made with ❤️ — sauvegarde locale, PWA‑friendly</small>
  </footer>

  <audio id="tickAudio">
    <source src="data:audio/wav;base64,UklGRmQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAAAAAABkAAAAPwAAAP///8zMzP///wAA" type="audio/wav">
  </audio>

  <script src="script.js"></script>
</body>
</html>
